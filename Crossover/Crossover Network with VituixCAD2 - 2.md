#crossover #VituixCAD 

Passive Crossover Network with VituixCAD #2

ตอนนี้ จะเป็นเรื่อง ฟิลเตอร์พื้นฐาน

สารบัญ
1.  วงจรครอสโอเวอร์คืออะไร และ แนะนำ VituixCAD
	https://www.facebook.com/groups/791461357947350/permalink/2238738593219612
2. **ฟิลเตอร์พื้นฐาน**
3. วงจรครอสโอเวอร์และเฟส
4. วงจรครอสโอเวอร์และอิมพีแดนซ์
5. เรื่องอื่น ๆ เกี่ยวกับวงจรครอสโอเวอร์

เหมือนเดิมถ้าชอบบทความแบบนี้ก็อย่าลืมกด like หรือคอมเม้นต์นะครับ
ใครมีข้อเสนอแนะหรือมีข้อสงสัยตรงไหนก็สามารถทิ้งไว้คอมเม้นต์ได้
และถ้าเห็นว่าข้อมูลของผมผิดพลาดก็สามารถเสนอแนะกันได้นะครับ

-----
บทความอื่น ๆ
https://docs.google.com/spreadsheets/d/1rxUrbgZ-fHgAC0ry7jyNlXNsLzxi6G1SH0ofxL6onEk/

1. Basic filter

เห็นภาพใครหลายคนก็คงคิดเหมือนกันว่า ไอ Low pass filter กับ High pass filter มันมีแค่นี้เองเหรอ? มันคือแค่ขดลวดตัวนำกับตัวเก็บประจุไม่ใช่เหรอ? 

ใช่ครับวงจร filter โดยพื้นฐานมันก็มีแค่นี้แหละ

![[xover-02-01.png]]

2. L ทำงานอย่างไร
จะเปรียบเทียบการทำงานของขดลวดตัวนำ ก็อาจจะเปลียบกับพวกล้อตุนกำลัง หรือ flywheel ที่มีน้ำหนักมาก ๆ ทำให้หมุนยาก และพอหมุนแล้วก็ไม่ค่อยจะหยุดเท่าไหร่ ทำให้มันไม่ค่อยจะตอบสนองกับการเปลี่ยนแปลงความถี่เร็ว ๆ

หรือบางที่ก็อาจจะเปรียบเทียบกับกังหันน้ำ ซึ่งสามารถดูได้จากเว็ปนี้
https://www.youtube.com/watch?v=KSylo01n5FY

หรือถ้าใครอยากนึกภาพเป็นของเล่น ผมแนะนำให้ลองดูคลิปนี้
https://www.youtube.com/watch?v=QrkiJZKJfpY&t=482s

![[xover-02-02.png]]

3. C ทำงานอย่างไร
หลายคนคงทราบอยู่แล้วว่า ถ้าเราต้องการกรอง DC ออกจากสัญญาณ AC วิธีหนึ่งที่ใช้ได้คือการเอา C มาคั่น ความต่างศักดิ์ DC ก็จะหายไปเหลือแต่สัญญาณ AC ออกมา 

ในสัญญาณความถี่ต่ำก็เช่นกัน ถ้าเราเอาตัวเก็บประจุมาขั้น มันก็จะไม่ค่อยยอมให้ผ่านสักเท่าไหร่ ต้องเพิ่มขนาดการเก็บประจุของ C ให้ตัวใหญ่ขึ้น ก็จะพอมีสัญญาณความถี่ต่ำเล็ดลอดออกมาบ้าง แต่ถ้าค่าของ C ยิ่งเล็กเท่าไหร่ ก็จะกรองสัญาณที่ความถี่สูงขึ้นออกไปด้วย

การทำงานของตัวเก็บประจุแบบฟิวเตอร์อาจจะเป็นเรื่องที่นึกภาพออกยาก เพราะเราไม่สามารถนำไปเทียบกับสิ่งของในชีวิตจริงได้ยาก (เหตุผลหนึ่งที่ทำให้ตอนนี้ออกช้าเพราะผมพยายามหาตัวอย่างมาเปรียบเทียบนี่แหละ)

หรือถ้าดูในของเล่น spintronics เข้าก็จะใช้สปริงค์ มาใช้แทนตัวเก็บประจุ ซึ่งก็ทำให้เห็นภาพว่าฟิวเตอร์ทำงานอย่างไรได้ยากอยู่ดี

เอาเป็นว่าใครนึกภาพไม่ออกก็ข้ามส่วนนี้ไปก่อนก็แล้วกันเพราะการนำไปใช้จริงใน simulator มันง่ายและไม่ต้องใช้ความเข้าใจที่ลึกซึ้งขนาดนั้น

![[xover-02-03.png]]

4.  ค่าที่เกี่ยวข้องกับฟิวเตอร์

หลักการของฟิวเตอร์ แน่นอนว่าถ้าเราต้องการที่จะออกแบบฟิวเตอร์ที่ความถี่ใด ๆ เราสามารถหาสูตรคำนวนได้จากเว็ปทั่วไปดังนั้นผมจะไม่พูดถึงสูตรพวกนั้น ซึ่งก็อาจจะได้ใช้เพียงเล็กน้อยเมื่อเราใช้โปรแกรม simulator อย่าง VituixCAD

สิ่งที่ผมคิดว่าสำคัญคือคุณลักษณะของฟิวเตอร์มากกว่า

อย่างแรกคือที่ ความถี่ฟิวเตอร์ ความดังจะลดลงไป 3 dB
ดังภาพเป็น Low pass filter ที่ความถี่ 1 kHz จะเห็นว่าความดังนั้นลดลงไปแล้ว 3 dB

สำหรับ 1st order low pass filter ความดังจะลดลง 20 dB ทุก ๆ ความถี่ที่เพิ่ม 10 เท่า
หรือลดลง 6.02 dB ทุก ๆ ความถี่เพิ่มที่ขึ้น 2 เท่า หรือ 1 Octave

* 1 Octave ในทางดนตรีหมายถึงเสียงโน้ตที่สูงขึ้น 1 ระดับเช่น C กลาง ไป C สูง ซึ่งถ้าเอาความถี่ของโน้ตมาดูก็จะเห็นความถี่ที่เพิ่มขึ้น 2 เท่าเช่นกัน 
C4 (261.63 Hz) - C5 (523.25 Hz)

โดยใน octave แรกอาจมีค่าคลาดเคลื่อนไปบ้าง ไม่ได้ลดลงเป็นเส้นตรงอย่างอุดมคติ แต่ก็ยังอยู่ในระยะที่สามารถประมาณได้

ผมสรุปค่าที่จุดต่าง ๆ อีกทีหนึง

ถ้าความดังเริ่มต้นของสัญญาณ อยู่ที่ 0 dB
ตัด low pass ฟิวเตอร์ที่ความถี่ 1 kHz และที่ความถี่นี้เสียงจะลดลงไป 3dB (ที่จุด A)
ที่ความถี่ 2 kHz หรือ 1 octave ถัดมา เสียงจะลดลงไปใกล้ ๆ 6 dB (ที่จุด B)
ที่ความถี่ 10 kHz หรือ 1 decade เสียงจะลดลงไป 20 dB (ก่อนจุด D 1 octave)

ในช่วงที่กราฟลาดลงไปเป็นเส้นตรง จุดใด ๆ 2 จุด
ถ้าห่างกัน 1 octave (B กับ C) จะมีความดังต่างกัน 6.02 dB เสมอ
ถ้าห่างกัน 1 decade (B กับ D) จะมีความดังต่างกัน 20 dB เสมอ

ส่วน 1st order high pass filter ก็จะมีกราฟลักษณ์นี้เช่นกันแต่จะเป็นในทางทิศตรงกันข้าม


รูปจาก https://eepower.com/technical-articles/calculating-rc-low-pass-filter-cut-off-frequency-and-transfer-function

![[xover-02-04.png]]

5. ออร์เดอร์กับฟิวเตอร์
จากตัวอย่างที่ผ่าน ๆ มา จะเห็นว่าผมจะใช้ชื่อ 1st order อยู่ข้างหน้าฟิวเตอร์เสมอ ซึ่ง 1st order หมายถึงอันดับขั้นที่ 1 ซึ่งก็จะตัดความดังได้ 6 dB ต่อ octave ถ้าต้องการตัดความดังให้กราฟชันลงเล็วขึ้นเราก็สามารถทำได้ด้วยการเพิ่มฟิวเตอร์ซ้อนเข้าไปอีกชั้นหนึ่ง 

โดยฟิวเตอร์ที่มีส่วนประกอบ 2 ชิ้น ก็จะเรียกว่า 2nd order 
ถ้า 3 ชิ้น ก็เรียกว่า 3rd order ถ้ามากขึ้นกว่านี้ก็เรียก 4th, 5th ไปเรื่อย ๆ

โดย 2nd order filter จะตัดความดังได้ชันขึ้นเป็น 12 dB ต่อ octave
3rd order filter ตัดได้ 18 dB/oct
และ order ถัดไปก็จะเพิ่มขึ้นทีละ 6 dB/oct ไปเรื่อย ๆ 
หรือ จะคำนวนโดยเอาเลข order คูณ 6 ไปก็ได้

ข้อสังเกตหนึ่งของ order ที่สูงขึ้น จะเห็นว่าความดังก่อนจุดตัดฟิวเตอร์มันจะเปลี่ยนน้อยลง
หรือจะบอกว่ามันจะเริ่มลดลงช้ากว่า order ที่ต่ำกว่าก็ได้

รูปจาก https://www.electronics-tutorials.ws/filter/second-order-filters.html

![[xover-02-05.png]]

6. การประกอบ nth order filter
การเพิ่ม order ของ filter นั้นไม่ใช่ว่าเราจะเอา 1st order filter มาซ้อนกันตรง ๆ เพราะถ้าคุณนำ 1st order low pass filter มาซ้อนกัน ก็กลายเป็นแค่เอาขดลวดตัวนำปกติมาต่ออนุกรมกัน กลายเป็นขดลวดตัวนำอันใหม่ที่ค่าเยอะขึ้นแต่ก็ยังเป็น 1st order เหมือนเดิม

ดังนั้นวิธีที่ถูกต้องคือคุณจะต้องเอา filter ตรงข้ามมาต่อขนานเข้าไป เช่น ถ้าคุณต้องการ 2nd order low pass filter คุณจะต้องนำตัวเก็บประจุมาต่อขนาดเข้ากับฟิวเตอร์เดิม 

พอเป็น 3rd order low pass filter คราวนี้คุณก็สามารถเอาขดลวดตัวนำมาต่ออนุกรมได้เหมือนเดิม พอเป็น 4rd order ก็เอาตัวเก็บประจุมาต่ออนุกรมอีก สลับกันไป

ส่วน high pass filter ก็เหมือนกันแค่สลับขดลวดตัวนำกับหัวเก็บประจุเท่านั้นแหละ

![[xover-02-06.png]]

7. เริ่มภาคปฏิบัติ

เอาหละก่อนที่เราจะไปทดลองออกวงจรครอสโอเวอร์ เรามาทวนความจำตอนที่แล้วกันเล็กน้อย

ผมอยากให้คุณเพิ่มลำโพง 2 ตัวแบบในภาพ

- Woofer SPL 80 dB Impedance 4 Ohm
- Tweeter SPL 88 dB Impedance 8 Ohm

ถ้าพร้อมแล้วก็ไปต่อกันเลย

![[xover-02-07.png]]

8. Block Library ของ VituixCAD

ตัวช่วยหนึ่งในโปรแกรม VituixCAD คือจะมีตัวอย่างวงจรพร้อมเครื่องคิดเลขให้เลือกใช้อย่างเสร็จสรรพ วิธีใช้งานคือ อันดับแรกให้กดที่ปุ่ม LIB บน toolbox (หมายเลข 1)
จะมีหน้าจอ Block library ขึ้นมา ซึ่งหน้าจอนี้ก็จะมีการรวบรวมวงจรครอสโอเวอร์พื้นฐานทั้งหมดมาให้ใช้ ทั้ง Active และ Passive แต่เนื่องจากเราจะใช้แค่ Passive ก็สามารถทำให้มันเลือกแสดงได้โดยการกดไปที่กล่อง filter Passive (หมายเลข 2) โปรแกรมก็จะแสดงออกมาเฉพาะวงจรที่เราสนใจ ซึ่งวงจรหลาย ๆ ตัว ผมก็จะมาอธิบายในตอนต่อ ๆ ไป ตอนนี้ผมอยากให้คุณลองหา 2nd order low pass ดูก่อน เมื่อเจอแล้วให้เลือกแล้วกด Open

![[xover-02-08.png]]

9. ตั้งค่า filter 
เมื่อคุณกด Open แล้ว จะเห็นว่ามี component ติดเมาส์ออกมาเหมือนตอนเลือก ตัวต้านทาน หรือ component อื่น ๆ ปกติเลย แต่เมื่อคุณวางมันลงในวงจร คุณจะเห็นว่ามีหน้าต่าง settings ขึ้นมา

ให้เปลี่ยนจุด crossover เป็น 1500 Hz และ impedance เป็น impedance ของ woofer นั่นคือ 4 Ohm แล้วกดปุ่ม Close

จากนั้นผมอยากให้คุณลองเพิ่ม 2rd order high pass filter สำหรับ tweeter ลงไป และต่อวงจรให้เรียบร้อย

![[xover-02-09.png]]

10.  เฉลย
เป็นอย่างไรบ้างครับได้ค่าออกมาเหมือนผมไหม ถ้าคุณเห็นหลุมที่ 1500 Hz และเฟสที่ต่างกันประมาณ 160° นั่นคือถูกต้องแล้ว

![[xover-02-10.png]]

11. Invert ลำโพง
เฟสที่ต่างกันเกือบ 180° นั้นนับว่าเป็นเรื่องปกติที่จะเกิดขึ้นกับ 2nd order filter วิธีแก้อย่างง่ายวิธีหนึ่งคือกลับขั้วลำโพงไปดอกหนึ่ง วิธีกลับขั้วลำโพงใน VituixCad นั้นทำได้ง่าย ๆ ด้วยการคลิกขวาที่ดอกลำโพงแล้วเลือก invert หลังจากเลือกแล้วจะสังเกตว่าเครื่องหมาย + - ที่ดอกลำโพงมันจะสลับกัน และเมื่อดูที่กราฟ จะเห็นว่ามันกลับมา in phase กันมากขึ้นแล้ว แต่ก็ยังมีอีกปัญหาหนึ่งคือเสียง tweeter มันดังเกินไป ดังนั้นเราต้องลดความดังลงด้วยขั้นตอนต่อไป  

![[xover-02-11.png]]

12. ลดความดัง tweeter ด้วย L-pad

ให้กลับไปที่ LIB แล้วหา L-pad ต่อ L-pad เข้าไปในวงจร แล้วตั้งค่า gain เป็น -8 dB (แก้ 88 -> 80 dB) และเลือก impedance เป็น 8 ohm จะเห็นว่าความดังของ tweeter ลดลงไปแล้วแต่ว่ามันยังมี นูน ๆ +3dB อยู่ที่ 1500 Hz

![[xover-02-12.png]]

13. ใช้สูตร Linkwitz-Riley
Linkwitz-Riley คืออะไรผมขอเก็บไว้ไปอธิบายในตอนต่อไปก็แล้วกัน แต่ตอนนี้เอาวิธีใช้ก่อน

ให้คุณคลิกขวาที่ 2rd order low pass filter (จะกดที่ลดลวดตัวนำหรือตัวต้านทานก็ได้) จากนั้นกด Tune block จะเห็นหน้าต่าง settings กลับมาอีกครั้ง ให้คุณกดที่ Option แล้วเลือก Linkwitz-Riley 

จากนั้นทำซ้ำที่ High pass filter ด้วย

สุดท้ายคุณจะได้กราฟที่ออกมาเรียบสวยงาม

เอาหละตอนนี้ผมขอจบเพียงเท่านี้ก่อน ติดตามตอนต่อไป
ถ้าใครชอบและคิดว่าบทความนี้มีประโยชน์
ก็อย่าลืมกด like โพสของผมจะได้ไม่จมลงไปอย่างรวดเร็ว 
และจะได้มีคนเห็นเยอะ ๆ ครับ

![[xover-02-13.png]]
